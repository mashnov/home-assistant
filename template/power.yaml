- sensor:
  - name: 'power'
    device_class: 'power'
    unit_of_measurement: 'W'
    state: >
      {% set kitchenValue = state_attr('sensor.power', 'kitchen_sensor') | float(0) %}
      {% set bathValue = state_attr('sensor.power', 'bath_sensor') | float(0) %}
      {% set toiletValue = state_attr('sensor.power', 'toilet_sensor') | float(0) %}
      {% set hallValue = state_attr('sensor.power', 'hall_sensor') | float(0) %}
      {% set bedroomValue = state_attr('sensor.power', 'bedroom_sensor') | float(0) %}
      {% set livingValue = state_attr('sensor.power', 'living_sensor') | float(0) %}
      {% set balcony1Value = state_attr('sensor.power', 'balcony_1_sensor') | float(0) %}
      {% set balcony2Value = state_attr('sensor.power', 'balcony_2_sensor') | float(0) %}
      {% set average = kitchenValue + bathValue + toiletValue + hallValue + bedroomValue + livingValue + balcony1Value + balcony2Value %}
      {{ average | float(0) | round(1) }}
    icon: 'mdi:meter-electric-outline'
    attributes:
      kitchen_sensor: "{{ states('sensor.kitchen_relay_power') | float(0) }}"
      bath_sensor: "{{ states('sensor.bath_relay_power') | float(0) }}"
      toilet_sensor: "{{ states('sensor.toilet_relay_power') | float(0) }}"
      hall_sensor: "{{ states('sensor.hall_relay_power') | float(0) }}"
      bedroom_sensor: "{{ states('sensor.bedroom_relay_power') | float(0) }}"
      living_sensor: "{{ states('sensor.living_relay_power') | float(0) }}"
      balcony_1_sensor: "{{ states('sensor.balcony_socket_relay_power') | float(0) }}"
      balcony_2_sensor: "{{ states('sensor.balcony_light_relay_power_2') | float(0) }}"

  - name: 'voltage'
    device_class: 'voltage'
    unit_of_measurement: 'V'
    state: >
      {% set kitchenValue = state_attr('sensor.voltage', 'kitchen_sensor') | float(0) %}
      {% set bathValue = state_attr('sensor.voltage', 'bath_sensor') | float(0) %}
      {% set toiletValue = state_attr('sensor.voltage', 'toilet_sensor') | float(0) %}
      {% set hallValue = state_attr('sensor.voltage', 'hall_sensor') | float(0) %}
      {% set bedroomValue = state_attr('sensor.voltage', 'bedroom_sensor') | float(0) %}
      {% set livingValue = state_attr('sensor.voltage', 'living_sensor') | float(0) %}
      {% set balconyValue1 = state_attr('sensor.voltage', 'balcony_1_sensor') | float(0) %}
      {% set balconyValue2 = state_attr('sensor.voltage', 'balcony_2_sensor') | float(0) %}
      {% set average = (kitchenValue + bathValue + toiletValue + hallValue + bedroomValue + livingValue + balconyValue1 + balconyValue2) / 7 %}
      {{ average | float(0) | round(1) }}
    icon: 'mdi:meter-electric'
    attributes:
      kitchen_sensor: "{{ state_attr('sensor.kitchen_relay_power', 'voltage') | float(0) }}"
      bath_sensor: "{{ state_attr('sensor.bath_relay_power', 'voltage') | float(0) }}"
      toilet_sensor: "{{ state_attr('sensor.toilet_relay_power', 'voltage') | float(0) }}"
      hall_sensor: "{{ state_attr('sensor.hall_relay_power', 'voltage') | float(0) }}"
      bedroom_sensor: "{{ state_attr('sensor.bedroom_relay_power', 'voltage') | float(0) }}"
      living_sensor: "{{ state_attr('sensor.living_relay_power', 'voltage') | float(0) }}"
      balcony_1_sensor: "{{ state_attr('sensor.balcony_socket_relay_power', 'voltage') | float(0) }}"
      balcony_2_sensor: "{{ state_attr('sensor.balcony_light_relay_power_2', 'voltage') | float(0) }}"
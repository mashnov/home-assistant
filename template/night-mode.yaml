- binary_sensor:
  - name: 'night-mode'
    state: >
      {% set hallValue = state_attr('binary_sensor.night_mode', 'hall') %}
      {% set bedroomValue = state_attr('binary_sensor.night_mode', 'bedroom') %}
      {% set livingValue = state_attr('binary_sensor.night_mode', 'living') %}
      {{ hallValue and bedroomValue and livingValue }}
    icon: >
      {% set defaultIcon = 'mdi:help-circle'%}
      {% set isNightIcon = is_state('binary_sensor.night_mode', 'on') and 'mdi:weather-night' %}
      {% set isDayIcon = is_state('binary_sensor.night_mode', 'off') and 'mdi:weather-partly-cloudy' %}
      {{ isNightIcon or isDayIcon or defaultIcon }}
    attributes:
      hall: false
      bedroom: false
      living: false

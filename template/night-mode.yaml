- binary_sensor:
  - name: 'night-mode'
    state: >
      {% set hallValue = state_attr('binary_sensor.night_mode', 'hall_state') %}
      {% set bedroomValue = state_attr('binary_sensor.night_mode', 'bedroom_state') %}
      {% set livingValue = state_attr('binary_sensor.night_mode', 'living_state') %}
      {{ hallValue and bedroomValue and livingValue }}
    icon: >
      {% set defaultIcon = 'mdi:help-circle' %}
      {% set isNightIcon = is_state('binary_sensor.night_mode', 'on') and 'mdi:weather-night' %}
      {% set isDayIcon = is_state('binary_sensor.night_mode', 'off') and 'mdi:weather-partly-cloudy' %}
      {{ isNightIcon or isDayIcon or defaultIcon }}
    attributes:
      hall_state: "{{ is_state('input_boolean.nm_hall', 'on') }}"
      bedroom_state: "{{ is_state('input_boolean.nm_bedroom', 'on') }}"
      living_state: "{{ is_state('input_boolean.nm_living', 'on') }}"
      
      hall_boolean: "{{ is_state('input_boolean.nm_hall', 'on') }}"
      bedroom_boolean: "{{ is_state('input_boolean.nm_bedroom', 'on') }}"
      living_boolean: "{{ is_state('input_boolean.nm_living', 'on') }}"

- sensor:
  - name: 'cloud-level'
    state: "{{ states('sensor.openweathermap_cloud_coverage') | int(0) }}"
    icon: >
      {% set isHightIcon = is_state('binary_sensor.cloud_boolean', 'on') and 'mdi:apple-icloud' %}
      {% set isLowIcon = 'mdi:cloud-outline' %}
      {{ isHightIcon or isLowIcon }}

- binary_sensor:
  - name: 'cloud-state'
    state: >
      {% set sensorValue = states('input_number.c_level') | int(0) %}
      {% set targetValue = states('input_number.cl_target') | int(0) %}
      {{ sensorValue > targetValue }}
    icon: >
      {% set isHightIcon = is_state('binary_sensor.cloud_boolean', 'on') and 'mdi:apple-icloud' %}
      {% set isLowIcon = 'mdi:cloud-outline' %}
      {{ isHightIcon or isLowIcon }}

  - name: 'cloud_boolean'
    state: "{{ is_state('input_boolean.c_cloudly', 'on') }}"
    icon: >
      {% set isHightIcon = is_state('binary_sensor.cloud_boolean', 'on') and 'mdi:apple-icloud' %}
      {% set isLowIcon = 'mdi:cloud-outline' %}
      {{ isHightIcon or isLowIcon }}

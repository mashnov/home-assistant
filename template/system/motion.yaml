- sensor:
  - name: 'm_duration'
    device_class: duration
    icon: 'mdi:clock-time-eleven-outline'
    state: >
      {% set isNight = is_state('binary_sensor.dt_is_night', 'on') %}
      {% set durationNight = states('sensor.m_duration_night') %}
      {% set durationDay = states('sensor.m_duration_day') %}
      {% set duration = iif(isNight, durationNight, durationDay) %}
      {{ duration | int(0) | timestamp_custom('%H:%M:%S', false) }}

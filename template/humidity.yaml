## HUMIDITY SENSORS
- sensor:
  - name: 'humidity_kitchen_level'
    device_class: 'humidity'
    unit_of_measurement: '%'
    state: "{{ states('sensor.kitchen_humidity') | float(0) | round(1) }}"
    icon: 'mdi:water'

  - name: 'humidity_bath_level'
    device_class: 'humidity'
    unit_of_measurement: '%'
    state: "{{ states('sensor.bath_humidity') | float(0) | round(1) }}"
    icon: >
      {% set isHight = is_state('binary_sensor.humidity_bath_hight', 'on') %}
      {{ iif(not(isHight), 'mdi:water', 'mdi:water-alert', 'mdi:help-circle') }}

  - name: 'humidity_hall_level'
    device_class: 'humidity'
    unit_of_measurement: '%'
    state: "{{ states('sensor.hall_humidity') | float(0) | round(1) }}"
    icon: >
      {% set isLow = is_state('binary_sensor.humidity_hall_low', 'on') %}
      {{ iif(not(isLow), 'mdi:water', 'mdi:water-alert-outline', 'mdi:help-circle') }}

  - name: 'humidity_bedroom_level'
    device_class: 'humidity'
    unit_of_measurement: '%'
    state: "{{ states('sensor.bedroom_humidity') | float(0) | round(1) }}"
    icon: >
      {% set isLow = is_state('binary_sensor.humidity_bedroom_low', 'on') %}
      {{ iif(not(isLow), 'mdi:water', 'mdi:water-alert-outline', 'mdi:help-circle') }}

  - name: 'humidity_living_level'
    device_class: 'humidity'
    unit_of_measurement: '%'
    state: "{{ states('sensor.living_humidity') | float(0) | round(1) }}"
    icon: >
      {% set isLow = is_state('binary_sensor.humidity_living_low', 'on') %}
      {{ iif(not(isLow), 'mdi:water', 'mdi:water-alert-outline', 'mdi:help-circle') }}

  - name: 'humidity_balcony_level'
    device_class: 'humidity'
    unit_of_measurement: '%'
    state: "{{ states('sensor.balcony_humidity') | float(0) | round(1) }}"
    icon: 'mdi:water'

- binary_sensor:
  - name: 'humidity_kitchen_low'
    device_class: 'problem'
    icon: 'mdi:water-alert-outline'
    state: >
      {% set sensorValue = states('sensor.humidity_kitchen_level') | int(0) %}
      {% set normalValue = states('input_number.humidity_target') | int(0) %}
      {% set offsetValue = states('input_number.humidity_offset') | int(0) %}
      {% set targetValue = normalValue - offsetValue %}
      {{ sensorValue < targetValue }}

  - name: 'humidity_bath_hight'
    device_class: 'problem'
    icon: 'mdi:water-alert'
    state: >
      {% set sensorValue = states('sensor.humidity_bath_level') | int(0) %}
      {% set normalValue = states('input_number.humidity_target_bath') | int(0) %}
      {% set offsetValue = states('input_number.humidity_offset') | int(0) %}
      {% set targetValue = normalValue + offsetValue %}
      {{ sensorValue > targetValue }}

  - name: 'humidity_hall_low'
    device_class: 'problem'
    icon: 'mdi:water-alert-outline'
    state: >
      {% set sensorValue = states('sensor.humidity_hall_level') | int(0) %}
      {% set normalValue = states('input_number.humidity_target') | int(0) %}
      {% set offsetValue = states('input_number.humidity_offset') | int(0) %}
      {% set targetValue = normalValue - offsetValue %}
      {{ sensorValue < targetValue }}

  - name: 'humidity_bedroom_low'
    device_class: 'problem'
    icon: 'mdi:water-alert-outline'
    state: >
      {% set sensorValue = states('sensor.humidity_bedroom_level') | int(0) %}
      {% set normalValue = states('input_number.humidity_target') | int(0) %}
      {% set offsetValue = states('input_number.humidity_offset') | int(0) %}
      {% set targetValue = normalValue - offsetValue %}
      {{ sensorValue < targetValue }}

  - name: 'humidity_living_low'
    device_class: 'problem'
    icon: 'mdi:water-alert-outline'
    state: >
      {% set sensorValue = states('sensor.humidity_living_level') | int(0) %}
      {% set normalValue = states('input_number.humidity_target') | int(0) %}
      {% set offsetValue = states('input_number.humidity_offset') | int(0) %}
      {% set targetValue = normalValue - offsetValue %}
      {{ sensorValue < targetValue }}

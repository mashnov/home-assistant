## ILLUMINANCE SENSORS
- sensor:
  - name: 'illuminance_level'
    device_class: 'illuminance'
    unit_of_measurement: 'lx'
    state: "{{ state_attr('sensor.balcony_illuminance', 'illuminance_lux') | int(0) }}"
    icon: 'mdi:brightness-7'

  - name: 'illuminance_degree_level'
    unit_of_measurement: 'Â°'
    icon: 'mdi:brightness-auto'
    state: >
      {% set maxValue = state_attr('input_number.solar_azimuth_target', 'max') %}
      {% set sensorValue = states('sensor.parameters_light') | int(0) %}
      {% set persentValue = sensorValue / 100 %}
      {{ maxValue * persentValue }}

- binary_sensor:
  - name: 'illuminance_kitchen_curtain'
    device_class: 'problem'
    icon: 'mdi:brightness-7'
    state: >
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_kitchen_curtain_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_kitchen_curtain_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue > targetValue }}

  - name: 'illuminance_bedroom_curtain'
    device_class: 'problem'
    icon: 'mdi:brightness-7'
    state: >
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_bedroom_curtain_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_bedroom_curtain_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue > targetValue }}

  - name: 'illuminance_living_curtain'
    device_class: 'problem'
    icon: 'mdi:brightness-7'
    state: >
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_living_curtain_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_living_curtain_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue > targetValue }}

  - name: 'illuminance_kitchen_top_light'
    device_class: 'problem'
    icon: 'mdi:brightness-5'
    state: >
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_kitchen_top_light_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_kitchen_top_light_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue < targetValue }}

  - name: 'illuminance_hall_top_light'
    device_class: 'problem'
    icon: 'mdi:brightness-5'
    state: >
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_hall_top_light_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_hall_top_light_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue < targetValue }}

  - name: 'illuminance_kitchen_back_light'
    device_class: 'problem'
    icon: 'mdi:brightness-5'
    state: >
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_kitchen_back_light_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_kitchen_back_light_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue < targetValue }}

  - name: 'illuminance_hall_back_light'
    device_class: 'problem'
    icon: 'mdi:brightness-5'
    state: > 
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_hall_back_light_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_hall_back_light_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue < targetValue }}

  - name: 'illuminance_bedroom_back_light'
    device_class: 'problem'
    icon: 'mdi:brightness-5'
    state: > 
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_bedroom_back_light_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_bedroom_back_light_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue < targetValue }}

  - name: 'illuminance_living_back_light'
    device_class: 'problem'
    icon: 'mdi:brightness-5'
    state: > 
      {% set isCloudly = is_state('binary_sensor.cloud_hight', 'on') %}
      {% set targetCloudly = states('input_number.illuminance_living_back_light_target_cloudly') | int(0) %}
      {% set targetSunny = states('input_number.illuminance_living_back_light_target_sunny') | int(0) %}
      {% set targetValue = iif(isCloudly, targetCloudly, targetSunny) %}
      {% set sensorValue = states('sensor.illuminance_level') | int(0) %}
      {{ sensorValue < targetValue }}

## ILLUMINANCE BOOLEAN SENSORS
  - name: 'illuminance_kitchen_curtain_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_kitchen_curtain', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_bedroom_curtain_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_bedroom_curtain', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_living_curtain_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_living_curtain', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_kitchen_top_light_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_kitchen_top_light', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_hall_top_light_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_hall_top_light', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_kitchen_back_light_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_kitchen_back_light', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_hall_back_light_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_hall_back_light', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_bedroom_back_light_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_bedroom_back_light', 'on') }}"
    icon: 'mdi:brightness-5'

  - name: 'illuminance_living_back_light_boolean'
    device_class: 'occupancy'
    state: "{{ is_state('input_boolean.illuminance_living_back_light', 'on') }}"
    icon: 'mdi:brightness-5'

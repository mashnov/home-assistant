- sensor:
  - name: 'current'
    unit_of_measurement: 'A'
    device_class: 'power'
    state: >
      {% set kitchenValue = state_attr('sensor.current', 'kitchen') | float(0) %}
      {% set bathValue = state_attr('sensor.current', 'bath') | float(0) %}
      {% set toiletValue = state_attr('sensor.current', 'toilet') | float(0) %}
      {% set hallValue = state_attr('sensor.current', 'hall') | float(0) %}
      {% set bedroomValue = state_attr('sensor.current', 'bedroom') | float(0) %}
      {% set livingValue = state_attr('sensor.current', 'living') | float(0) %}
      {% set balcony1Value = state_attr('sensor.current', 'balcony1') | float(0) %}
      {% set balcony2Value = state_attr('sensor.current', 'balcony2') | float(0) %}
      {% set average = kitchenValue + bathValue + toiletValue + hallValue + bedroomValue + livingValue + balcony1Value + balcony2Value %}
      {{ average | float(0) | round(1) }}
    icon: 'mdi:meter-electric-outline'
    attributes:
      kitchen: "{{ state_attr('sensor.kitchen_relay_power', 'current') }}"
      bath: "{{ state_attr('sensor.bath_relay_power', 'current')}}"
      toilet: "{{ state_attr('sensor.toilet_relay_power', 'current')}}"
      hall: "{{ state_attr('sensor.hall_relay_power', 'current')}}"
      bedroom: "{{ state_attr('sensor.bedroom_relay_power', 'current')}}"
      living: "{{ state_attr('sensor.living_relay_power', 'current')}}"
      balcony1: "{{ state_attr('sensor.balcony_socket_relay_power', 'current')}}"
      balcony2: "{{ state_attr('sensor.balcony_light_relay_power_2', 'current')}}"
## TOP LIGHT PARAMS
- alias: 'top_light_params'
  mode: 'queued'
  trigger:
  - platform: state
    entity_id: 'sensor.top_light_enabled_list'
  - platform: state
    entity_id: 'sensor.parameters_light'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ states("sensor.top_light_enabled_count") | int(0) > 0 }}'
      sequence:
      - service: script.top_light_set_params

## TOP LIGHT KITCHEN
- alias: 'top_light_kitchen'
  mode: 'queued'
  trigger:
  - platform: state
    entity_id: 'binary_sensor.top_light_kitchen_permission'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.switch_kitchen_1_on
        state: 'on'
      - condition: state
        entity_id: binary_sensor.top_light_kitchen_permission
        state: 'on'
      sequence:
      - service: script.top_light_kitchen_1_on
      - service: script.top_light_kitchen_2_on
      - service: script.top_light_kitchen_3_on
      - service: script.top_light_kitchen_4_on
      - service: script.top_light_kitchen_5_on
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_kitchen_permission
        state: 'off'
      sequence:
      - service: script.top_light_kitchen_1_off
      - service: script.top_light_kitchen_2_off
      - service: script.top_light_kitchen_3_off
      - service: script.top_light_kitchen_4_off
      - service: script.top_light_kitchen_5_off

## TOP LIGHT BATH
- alias: 'top_light_bath'
  mode: 'queued'
  trigger:
  - platform: state
    entity_id: 'binary_sensor.top_light_bath_permission'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_bath_permission
        state: 'on'
      sequence:
      - service: script.top_light_bath_on
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_bath_permission
        state: 'off'
      sequence:
      - service: script.top_light_bath_off

## TOP LIGHT TOILET
- alias: 'top_light_toilet'
  mode: 'queued'
  trigger:
  - platform: state
    entity_id: 'binary_sensor.top_light_toilet_permission'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_toilet_permission
        state: 'on'
      sequence:
      - service: script.top_light_toilet_on
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_toilet_permission
        state: 'off'
      sequence:
      - service: script.top_light_toilet_off

## TOP LIGHT HALL
- alias: 'top_light_hall'
  mode: 'queued'
  trigger:
  - platform: state
    entity_id: 'binary_sensor.top_light_hall_permission'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.switch_hall_on
        state: 'on'
      - condition: state
        entity_id: binary_sensor.top_light_hall_permission
        state: 'on'
      sequence:
      - service: script.top_light_hall_1_on
      - service: script.top_light_hall_2_on
      - service: script.top_light_hall_3_on
      - service: script.top_light_hall_4_on
      - service: script.top_light_hall_5_on
      - service: script.top_light_hall_6_on
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_hall_permission
        state: 'off'
      sequence:
      - service: script.top_light_hall_1_off
      - service: script.top_light_hall_2_off
      - service: script.top_light_hall_3_off
      - service: script.top_light_hall_4_off
      - service: script.top_light_hall_5_off
      - service: script.top_light_hall_6_off

## TOP LIGHT BEDROOM
- alias: 'top_light_bedroom'
  mode: 'queued'
  trigger:
  - platform: state
    entity_id: 'binary_sensor.top_light_bedroom_permission'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.switch_bedroom_on
        state: 'on'
      - condition: state
        entity_id: binary_sensor.top_light_bedroom_permission
        state: 'on'
      sequence:
      - service: script.top_light_bedroom_1_on
      - service: script.top_light_bedroom_2_on
      - service: script.top_light_bedroom_3_on
      - service: script.top_light_bedroom_4_on
      - service: script.top_light_bedroom_5_on
      - service: script.top_light_bedroom_6_on
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_bedroom_permission
        state: 'off'
      sequence:
      - service: script.top_light_bedroom_1_off
      - service: script.top_light_bedroom_2_off
      - service: script.top_light_bedroom_3_off
      - service: script.top_light_bedroom_4_off
      - service: script.top_light_bedroom_5_off
      - service: script.top_light_bedroom_6_off

## TOP LIGHT LIVING
- alias: 'top_light_living'
  mode: 'queued'
  trigger:
  - platform: state
    entity_id: 'binary_sensor.top_light_living_permission'
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.switch_living_on
        state: 'on'
      - condition: state
        entity_id: binary_sensor.top_light_living_permission
        state: 'on'
      sequence:
      - service: script.top_light_living_1_on
      - service: script.top_light_living_2_on
      - service: script.top_light_living_3_on
      - service: script.top_light_living_4_on
      - service: script.top_light_living_5_on
      - service: script.top_light_living_6_on
    - conditions:
      - condition: state
        entity_id: binary_sensor.top_light_living_permission
        state: 'off'
      sequence:
      - service: script.top_light_living_1_off
      - service: script.top_light_living_2_off
      - service: script.top_light_living_3_off
      - service: script.top_light_living_4_off
      - service: script.top_light_living_5_off
      - service: script.top_light_living_6_off

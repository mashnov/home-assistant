pressure:
  input_number:
    # home
    pressure_home_sensor_min:
      max: 780
      min: 750
      step: 1
    pressure_home_sensor_max:
      max: 780
      min: 750
      step: 1
    # kitchen
    pressure_kitchen_sensor_min:
      max: 780
      min: 750
      step: 1
    pressure_kitchen_sensor_max:
      max: 780
      min: 750
      step: 1
    # hall
    pressure_hall_sensor_min:
      max: 780
      min: 750
      step: 1
    pressure_hall_sensor_max:
      max: 780
      min: 750
      step: 1
    # bath
    pressure_bath_sensor_min:
      max: 780
      min: 750
      step: 1
    pressure_bath_sensor_max:
      max: 780
      min: 750
      step: 1
    # bedroom
    pressure_bedroom_sensor_min:
      max: 780
      min: 750
      step: 1
    pressure_bedroom_sensor_max:
      max: 780
      min: 750
      step: 1
    # living
    pressure_living_sensor_min:
      max: 780
      min: 750
      step: 1
    pressure_living_sensor_max:
      max: 780
      min: 750
      step: 1

  template:
  - sensor: 
    # home
    - name: 'pressure_home_virtual'
      device_class: 'pressure'
      unit_of_measurement: 'mmHg'
      state: >
        {% set kitchenValue = states('sensor.pressure_kitchen_virtual') | int(minValue) %}
        {% set hallValue = states('sensor.pressure_hall_virtual') | int(minValue) %}
        {% set bathValue = states('sensor.pressure_bath_virtual') | int(minValue) %}
        {% set bedroomValue = states('sensor.pressure_bedroom_virtual') | int(minValue) %}
        {% set livingValue = states('sensor.pressure_living_virtual') | int(minValue) %}
        {% set sensorValue = kitchenValue + hallValue + bathValue + bedroomValue + livingValue %}
        {{ (sensorValue / 5 )| round(0) }}
    # kitchen
    - name: 'pressure_kitchen_virtual'
      device_class: 'pressure'
      unit_of_measurement: 'mmHg'
      state: >
        {% set minValue = states('input_number.pressure_kitchen_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.kitchen_pressure') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # hall 
    - name: 'pressure_hall_virtual'
      device_class: 'pressure'
      unit_of_measurement: 'mmHg'
      state: >
        {% set minValue = states('input_number.pressure_hall_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.hall_pressure') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # bath
    - name: 'pressure_bath_virtual'
      device_class: 'pressure'
      unit_of_measurement: 'mmHg'
      state: >
        {% set minValue = states('input_number.pressure_bath_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.bath_pressure') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # bedroom
    - name: 'pressure_bedroom_virtual'
      device_class: 'pressure'
      unit_of_measurement: 'mmHg'
      state: >
        {% set minValue = states('input_number.pressure_bedroom_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.bedroom_pressure') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # living
    - name: 'pressure_living_virtual'
      device_class: 'pressure'
      unit_of_measurement: 'mmHg'
      state: >
        {% set minValue = states('input_number.pressure_living_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.living_pressure') | int(minValue) %}
        {{ sensorValue | round(0) }}

  - binary_sensor:
    # home
    - name: 'pressure_home_is_low'
      state: >
        {% set minValue = states('input_number.pressure_home_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.pressure_home_virtual') | float(maxValue) %}
        {{ sensorValue < minValue }}
    - name: 'pressure_home_is_hight'
      state: >
        {% set maxValue = states('input_number.pressure_home_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.pressure_home_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'pressure_home_is_normal'
      state: >
        {% set minValue = states('input_number.pressure_home_sensor_min') | int(0) %}
        {% set maxValue = states('input_number.pressure_home_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.pressure_home_virtual') | float(maxValue) %}
        {{ (sensorValue >= minValue) and (sensorValue <= maxValue) }}
    # kitchen
    - name: 'pressure_kitchen_is_low'
      state: >
        {% set minValue = states('input_number.pressure_kitchen_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.pressure_kitchen_virtual') | float(maxValue) %}
        {{ sensorValue < minValue }}
    - name: 'pressure_kitchen_is_hight'
      state: >
        {% set maxValue = states('input_number.pressure_kitchen_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.pressure_kitchen_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'pressure_kitchen_is_normal'
      state: >
        {% set isLow = is_state('binary_sensor.pressure_kitchen_is_low', 'on') %}
        {% set isHight = is_state('binary_sensor.pressure_kitchen_is_hight', 'on') %}
        {{ not(isLow) and not(isHight) }}
    # hall 
    - name: 'pressure_hall_is_low'
      state: >
        {% set minValue = states('input_number.pressure_hall_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.pressure_hall_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'pressure_hall_is_hight'
      state: >
        {% set maxValue = states('input_number.pressure_hall_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.pressure_hall_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'pressure_hall_is_normal'
      state: >
        {% set isLow = is_state('binary_sensor.pressure_hall_is_low', 'on') %}
        {% set isHight = is_state('binary_sensor.pressure_hall_is_hight', 'on') %}
        {{ not(isLow) and not(isHight) }}
    # bath
    - name: 'pressure_bath_is_low'
      state: >
        {% set minValue = states('input_number.pressure_bath_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.pressure_bath_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'pressure_bath_is_hight'
      state: >
        {% set maxValue = states('input_number.pressure_bath_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.pressure_bath_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'pressure_bath_is_normal'
      state: >
        {% set isLow = is_state('binary_sensor.pressure_bath_is_low', 'on') %}
        {% set isHight = is_state('binary_sensor.pressure_bath_is_hight', 'on') %}
        {{ not(isLow) and not(isHight) }}
    # bedroom
    - name: 'pressure_bedroom_is_low'
      state: >
        {% set minValue = states('input_number.pressure_bedroom_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.pressure_bedroom_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'pressure_bedroom_is_hight'
      state: >
        {% set maxValue = states('input_number.pressure_bedroom_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.pressure_bedroom_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'pressure_bedroom_is_normal'
      state: >
        {% set isLow = is_state('binary_sensor.pressure_bedroom_is_low', 'on') %}
        {% set isHight = is_state('binary_sensor.pressure_bedroom_is_hight', 'on') %}
        {{ not(isLow) and not(isHight) }}
    # living
    - name: 'pressure_living_is_low'
      state: >
        {% set minValue = states('input_number.pressure_living_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.pressure_living_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'pressure_living_is_hight'
      state: >
        {% set maxValue = states('input_number.pressure_living_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.pressure_living_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'pressure_living_is_normal'
      state: >
        {% set isLow = is_state('binary_sensor.pressure_living_is_low', 'on') %}
        {% set isHight = is_state('binary_sensor.pressure_living_is_hight', 'on') %}
        {{ not(isLow) and not(isHight) }}

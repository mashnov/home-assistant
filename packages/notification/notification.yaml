notification:
  automation:

###
## HOME HOMEPOD
###

  - alias: 'notification_home_homepod_doorbell_inside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.hall_button_inside
    action:
    - service: script.homepod_message
      data_template:
        message: "–ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ!"
    - service: script.console
      data:
        message: |
          ID. | Parent | user
          to_state: {{ trigger.to_state }}
          id: {{ trigger.to_state.context.id }}
          parent_id: {{ trigger.to_state.context.parent_id }}
          user_id: {{ trigger.to_state.context.user_id }}

  - alias: 'notification_home_homepod_doorbell_outside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.hall_button_outside
    action:
    - service: script.homepod_message
      data_template:
        message: "–ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ —É –ª–∏—Ñ—Ç–∞!"
    - service: script.console
      data:
        message: |
          ID. | Parent | user
          to_state: {{ trigger.to_state }}
          id: {{ trigger.to_state.context.id }}
          parent_id: {{ trigger.to_state.context.parent_id }}
          user_id: {{ trigger.to_state.context.user_id }}

  - alias: 'notification_home_homepod_intercom'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.intercom_hall_open'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.intercom_hall_enabled
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–Ø –æ—Ç–∫—Ä—ã–ª–∞ –¥–æ–º–æ—Ñ–æ–Ω!"
      - conditions:
        - condition: state
          entity_id: input_boolean.intercom_hall_enabled
          state: 'on'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ö—Ç–æ-—Ç–æ –∑–≤–æ–Ω–∏—Ç –≤ –¥–æ–º–æ—Ñ–æ–Ω!"

  - alias: 'notification_home_homepod_night_mode'
    mode: 'queued'
    trigger:
    - id: 'on'
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'off'
      to: 'on'
    - id: 'off'
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'on'
      to: 'off'
    action:
    - choose:
      - conditions:
        - condition: trigger
          id: 'off'
        sequence:
        - delay: '00:00:00.1'
        - service: script.homepod_message
          data_template:
            message: "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!"
      - conditions:
        - condition: trigger
          id: 'on'
        sequence:
        - delay: '00:00:00.1'
        - service: script.homepod_message
          data_template:
            message: "–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏!"

###
## HOME TELEGRAMM
###

  - alias: 'notification_home_telegramm_doorbell_inside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.hall_button_inside
    action:
    - service: script.telegramm_send_home_text
      data_template:
        message: "üè† –ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_home_telegramm_doorbell_outside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.hall_button_outside
    action:
    - service: script.telegramm_send_home_text
      data_template:
        message: "üè† –ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ —É –ª–∏—Ñ—Ç–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_home_telegramm_intercom'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.intercom_hall_call'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.intercom_hall_enabled
          state: 'on'
        sequence:
        - service: script.telegramm_send_home_text_custom_menu
          data_template:
            message: "üè† –ö—Ç–æ-—Ç–æ –∑–≤–æ–Ω–∏—Ç –≤ –¥–æ–º–æ—Ñ–æ–Ω. ({{ now().timestamp() | timestamp_custom('%H:%M') }})"
            navigation: 
            - 'üîì –û—Ç–∫—Ä—ã—Ç—å :/intercom_hall_open'
            - '‚ùå –ó–∞–∫—Ä—ã—Ç—å :/hide_menu'
      - conditions:
        - condition: state
          entity_id: input_boolean.intercom_hall_enabled
          state: 'off'
        sequence:
        - service: script.telegramm_send_home_text
          data_template:
            message: "üè† –î–æ–º–æ—Ñ–æ–Ω –æ—Ç–∫—Ä—ã—Ç. ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_home_telegramm_night_mode'
    mode: 'queued'
    trigger:
    - id: 'on'
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'off'
      to: 'on'
    - id: 'off'
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'on'
      to: 'off'
    action:
    - choose:
      - conditions:
        - condition: trigger
          id: 'off'
        sequence:
        - service: script.telegramm_send_home_text
          data_template:
            message: "üè† –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –≤—ã–∫–ª—é—á–µ–Ω. ({{ now().timestamp() | timestamp_custom('%H:%M') }})"
      - conditions:
        - condition: trigger
          id: 'on'
        sequence:
        - service: script.telegramm_send_home_text
          data_template:
            message: "üè† –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω. ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

###
## CLIMAT HOMEPOD
###

  - alias: 'notification_climat_homepod_hygrostat_empty_hall'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.hygrostat_hall_is_empty'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ –≤ –∫–æ—Ä–∏–¥–æ—Ä–µ!"

  - alias: 'notification_climat_homepod_hygrostat_empty_bedroom'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.hygrostat_bedroom_is_empty'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ –≤ —Å–ø–∞–ª—å–Ω–µ!"

  - alias: 'notification_climat_homepod_hygrostat_empty_living'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.hygrostat_living_is_empty'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ –≤ –≥–æ—Å—Ç–∏–Ω–æ–π!"

###
## CLIMAT TELEGRAMM
###

  - alias: 'notification_climat_telegrammhygrostat_empty_hall'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.hygrostat_hall_is_empty'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: "üß• –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_climat_telegrammhygrostat_empty_bedroom'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.hygrostat_bedroom_is_empty'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: "üõèÔ∏è –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_climat_telegrammhygrostat_empty_living'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.hygrostat_living_is_empty'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: "üõãÔ∏è –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

###
## SYSTEM
###

  - alias: 'notification_system_shutdown'
    mode: 'queued'
    trigger:
    - platform: homeassistant
      event: shutdown
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_start'
    mode: 'queued'
    trigger:
    - platform: homeassistant
      event: start
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –°—Ç–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_backup'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.system_is_backed_up'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_backup_error'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'sensor.backup_state'
      to: 'error'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –û—à–∏–±–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_power_error'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'binary_sensor.rpi_power_status'
      from: 'off'
      to: 'on'
      for:
        seconds: 5
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∏—Ç–∞–Ω–∏–µ–º ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_file_editor'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.file_editor_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ FILE EDITOR ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_home_assistant_core'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.home_assistant_core_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ HOME ASSISTANT CORE ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_google_drive_backup'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.home_assistant_google_drive_backup_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ GOOGLE DRIVE BACKUP ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_home_assistant'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.home_assistant_operating_system_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ HOME ASSISTANT ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_supervisor'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.home_assistant_supervisor_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SUPERVISOR ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_mosquitto_broker'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.mosquitto_broker_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ MOSQUITO BROCKER ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_tailscale'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.tailscale_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ TAILSCALE ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_zigbee2mqtt'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.zigbee2mqtt_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ZIGBEE 2 MQTT ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_update_terminal_ssh'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.terminal_ssh_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ TERMINAL & SSH ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_system_hacs_update'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.hacs
      above: 0
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: "‚öôÔ∏è –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ HACS ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

###
## SECURITY
###

  - alias: 'notification_secuirity_balcony_door_open'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_balcony_virtual'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: "ü™¥ –î–≤–µ—Ä—å –æ—Ç–∫—Ä—ã—Ç–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_secuirity_door_close'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_balcony_virtual'
      from: 'on'
      to: 'off'
    action:
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: "ü™¥ –î–≤–µ—Ä—å –∑–∞–∫—Ä—ã—Ç–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_secuirity_hall_door_open'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_hall_virtual'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: "üß• –î–≤–µ—Ä—å –æ—Ç–∫—Ä—ã—Ç–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

  - alias: 'notification_secuirity_hall_door_close'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_hall_virtual'
      from: 'on'
      to: 'off'
    action:
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: "üß• –î–≤–µ—Ä—å –∑–∞–∫—Ä—ã—Ç–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})"

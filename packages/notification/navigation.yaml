navigation_telegramm:
  script:
    navigation_telegramm:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🏠 Главное меню
            Температура: {{ states('sensor.temperature_balcony') }}
            Влажность: {{ states('sensor.humidity_balcony') }}
            Давление: {{ states('sensor.pressure_balcony') }} мм рт.ст.
          data:
            inline_keyboard: 
            - '🍽️ Кухня :/kitchen, 🧥 Коридор :/hall'
            - '🛁 Ванная :/bath, 🚽 Туалет :/toilet'
            - '🛏️ Спальня :/bedroom, 🛋️ Гостиная :/living'
            - '🪴 Балкон :/balcony, 🖲️ Система :/system'
            - '❌ Закрыть :/hide_menu'

    navigation_telegramm_kitchen:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🍽️ Кухня
            Температура: {{ states('sensor.temperature_kitchen') }}
            Влажность: {{ states('sensor.humidity_kitchen') }}
            {{ iif(is_state('binary_sensor.window_kitchen_left', 'on'), '🟠', '🟢', '❔') }} Левое окно {{ iif(is_state('binary_sensor.window_kitchen_left', 'on'), 'открыто', 'закрыто', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.window_kitchen_right', 'on'), '🟠', '🟢', '❔') }} Правое окно {{ iif(is_state('binary_sensor.window_kitchen_right', 'on'), 'открыто', 'закрыто', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.occupancy_kitchen', 'on'), '🟠', '🟢', '❔') }} Присутствие {{ iif(is_state('binary_sensor.occupancy_kitchen', 'on'), 'обнаружено', 'не обнаружено', 'неизвестно') }}
          data:
            inline_keyboard: 
            - "{{ iif(is_state('light.party_light_kitchen', 'on'), '🟢', '🔴', '❔') }} Потолок :/kitchen_toggle_party_light"
            - "{{ iif(is_state('light.top_light_kitchen', 'on'), '🟢', '🔴', '❔') }} Освещение :/kitchen_toggle_top_light"
            - "{{ iif(is_state('light.back_light_kitchen', 'on'), '🟢', '🔴', '❔') }} Подсветка :/kitchen_toggle_back_light"
            - "{{ iif(is_state('light.night_light_kitchen', 'on'), '🟢', '🔴', '❔') }} Ночник :/kitchen_toggle_night_light"
            - "Шторы :/kitchen_toggle_curtain"
            - "⬅️ :/main, 🔄 :/kitchen, ❌ :/hide_menu"

    navigation_telegramm_hall:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🧥 Коридор
            Температура: {{ states('sensor.temperature_hall') }}
            Влажность: {{ states('sensor.humidity_hall') }}
            {{ iif(is_state('binary_sensor.door_hall', 'on'), '🟠', '🟢', '❔') }} Входная дверь {{ iif(is_state('binary_sensor.door_hall', 'on'), 'открыта', 'закрыта', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.occupancy_hall', 'on'), '🟠', '🟢', '❔') }} Присутствие {{ iif(is_state('binary_sensor.occupancy_hall', 'on'), 'обнаружено', 'не обнаружено', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.hygrostat_hall_is_empty', 'on'), '🔴', '🟢', '❔') }} Вода в увлажнителе
          data:
            inline_keyboard: 
            - "{{ iif(is_state('light.top_light_hall', 'on'), '🟢', '🔴', '❔') }} Освещение :/hall_toggle_top_light"
            - "{{ iif(is_state('light.back_light_hall', 'on'), '🟢', '🔴', '❔') }} Подсветка :/hall_toggle_back_light"
            - "{{ iif(is_state('light.night_light_hall', 'on'), '🟢', '🔴', '❔') }} Ночник :/hall_toggle_night_light"
            - "{{ iif(is_state('switch.relay_hall_l2', 'on'), '🟢', '🔴', '❔') }} Увлажнитель :/hall_toggle_humidifier"
            - "⬅️ :/main, 🔄 :/hall, ❌ :/hide_menu"

    navigation_telegramm_bath:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🛁 Ванная
            Температура: {{ states('sensor.temperature_bath') }}
            Влажность: {{ states('sensor.humidity_bath') }}
            {{ iif(is_state('binary_sensor.door_hall', 'on'), '🟠', '🟢', '❔') }} Дверь {{ iif(is_state('binary_sensor.door_bath', 'on'), 'открыта', 'закрыта', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.occupancy_hall', 'on'), '🟠', '🟢', '❔') }} Присутствие {{ iif(is_state('binary_sensor.occupancy_bath', 'on'), 'обнаружено', 'не обнаружено', 'неизвестно') }}
          data:
            inline_keyboard: 
            - "{{ iif(is_state('light.top_light_bath', 'on'), '🟢', '🔴', '❔') }} Освещение :/bath_toggle_top_light"
            - "{{ iif(is_state('light.night_light_bath', 'on'), '🟢', '🔴', '❔') }} Ночник :/bath_toggle_night_light"
            - "{{ iif(is_state('fan.fan_toilet', 'on'), '🟢', '🔴', '❔') }} Осушитель :/bath_toggle_dehumidifier"
            - "⬅️ :/main, 🔄 :/bath, ❌ :/hide_menu"

    navigation_telegramm_toilet:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🚽 Туалет
            {{ iif(is_state('binary_sensor.door_toilet', 'on'), '🟠', '🟢', '❔') }} Дверь {{ iif(is_state('binary_sensor.door_toilet', 'on'), 'открыта', 'закрыта', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.occupancy_toilet', 'on'), '🟠', '🟢', '❔') }} Присутствие {{ iif(is_state('binary_sensor.occupancy_toilet', 'on'), 'обнаружено', 'не обнаружено', 'неизвестно') }}
          data:
            inline_keyboard: 
            - "{{ iif(is_state('light.top_light_toilet', 'on'), '🟢', '🔴', '❔') }} Освещение :/toilet_toggle_top_light"
            - "{{ iif(is_state('light.night_light_toilet', 'on'), '🟢', '🔴', '❔') }} Ночник :/toilet_toggle_night_light"
            - "{{ iif(is_state('fan.fan_toilet', 'on'), '🟢', '🔴', '❔') }} Вытяжка :/toilet_toggle_dehumidifier"
            - "⬅️ :/main, 🔄 :/toilet, ❌ :/hide_menu"

    navigation_telegramm_bedroom:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🛏️ Спальня
            Температура: {{ states('sensor.temperature_bedroom') }}
            Влажность: {{ states('sensor.humidity_bedroom') }}
            {{ iif(is_state('binary_sensor.window_bedroom_left', 'on'), '🟠', '🟢', '❔') }} Левое окно {{ iif(is_state('binary_sensor.window_bedroom_left', 'on'), 'открыто', 'закрыто', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.window_bedroom_right', 'on'), '🟠', '🟢', '❔') }} Правое окно {{ iif(is_state('binary_sensor.window_bedroom_right', 'on'), 'открыто', 'закрыто', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.door_bedroom', 'on'), '🟢', '🟠', '❔') }} Дверь {{ iif(is_state('binary_sensor.door_bedroom', 'on'), 'открыта', 'закрыта', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.hygrostat_bedroom_is_empty', 'on'), '🔴', '🟢', '❔') }} Вода в увлажнителе
          data:
            inline_keyboard: 
            - "{{ iif(is_state('light.top_light_bedroom', 'on'), '🟢', '🔴', '❔') }} Освещение :/bedroom_toggle_top_light"
            - "{{ iif(is_state('light.back_light_bedroom', 'on'), '🟢', '🔴', '❔') }} Подсветка :/bedroom_toggle_night_light"
            - "{{ iif(is_state('switch.relay_bedroom_l2', 'on'), '🟢', '🔴', '❔') }} Увлажнитель :/bedroom_toggle_humidifier"
            - "Шторы :/bedroom_toggle_curtain"
            - "⬅️ :/main, 🔄 :/bedroom, ❌ :/hide_menu"

    navigation_telegramm_living:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🛋️ Гостиная
            Температура: {{ states('sensor.temperature_living') }}
            Влажность: {{ states('sensor.humidity_living') }}
            {{ iif(is_state('binary_sensor.window_living', 'on'), '🟠', '🟢', '❔') }} Окно {{ iif(is_state('binary_sensor.window_living', 'on'), 'открыто', 'закрыто', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.door_living', 'on'), '🟢', '🟠', '❔') }} Дверь {{ iif(is_state('binary_sensor.door_living', 'on'), 'открыта', 'закрыта', 'неизвестно') }}
            {{ iif(is_state('binary_sensor.hygrostat_living_is_empty', 'on'), '🔴', '🟢', '❔') }} Вода в увлажнителе 
          data:
            inline_keyboard: 
            - "{{ iif(is_state('light.top_light_living', 'on'), '🟢', '🔴', '❔') }} Освещение :/living_toggle_top_light"
            - "{{ iif(is_state('light.back_light_living', 'on'), '🟢', '🔴', '❔') }} Подсветка :/living_toggle_night_light"
            - "{{ iif(is_state('switch.relay_living_l1', 'on'), '🟢', '🔴', '❔') }} Увлажнитель :/living_toggle_humidifier"
            - "📷 Камера :/living_get_camera_image"
            - "Шторы :/living_toggle_curtain"
            - "⬅️ :/main, 🔄 :/living, ❌ :/hide_menu"

    navigation_telegramm_balcony:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: |
            🪴 Балкон
            Температура: {{ states('sensor.temperature_balcony') }}
            Влажность: {{ states('sensor.humidity_balcony') }}
            Давление: {{ states('sensor.pressure_balcony') }} мм рт.ст.
            Освещенность: {{ states('sensor.illuminance_balcony') }}
            {{ iif(is_state('binary_sensor.door_balcony', 'on'), '🟠', '🟢', '❔') }} Дверь {{ iif(is_state('binary_sensor.door_balcony', 'on'), 'открыта', 'закрыта', 'неизвестно') }}
          data:
            inline_keyboard: 
            - "{{ iif(is_state('light.back_light_balcony', 'on'), '🟢', '🔴', '❔') }} Подсветка :/balcony_toggle_top_light"
            - "{{ iif(is_state('light.night_light_balcony', 'on'), '🟢', '🔴', '❔') }} Ночник :/balcony_toggle_night_light"
            - "{{ iif(is_state('switch.relay_balcony_l4', 'on'), '🟢', '🔴', '❔') }} Розетка :/balcony_toggle_outlet"
            - "{{ iif(is_state('switch.relay_balcony_l3', 'on'), '🟢', '🔴', '❔') }} Фонтан :/balcony_toggle_sprinkler"
            - "⬅️ :/main, 🔄 :/balcony, ❌ :/hide_menu"

    navigation_telegramm_system:
      mode: 'queued'
      sequence:
      - service: notify.telegram_home_group_id
        data_template:
          message: "🖲️ Система"
          data:
            inline_keyboard: 
            - "⚠️ Перезагрузка :/restart"
            - "⬅️ :/main, 🔄 :/system, ❌ :/hide_menu"

  automation:
  - alias: navigation_telegramm
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/main'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/main'
    action:
    - service: script.navigation_telegramm

  - alias: navigation_telegramm_kitchen
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/kitchen'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/kitchen'
    action:
    - service: script.navigation_telegramm_kitchen

  - alias: navigation_telegramm_hall
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/hall'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/hall'
    action:
    - service: script.navigation_telegramm_hall

  - alias: navigation_telegramm_bath
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/bath'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/bath'
    action:
    - service: script.navigation_telegramm_bath

  - alias: navigation_telegramm_toilet
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/toilet'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/toilet'
    action:
    - service: script.navigation_telegramm_toilet

  - alias: navigation_telegramm_bedroom'
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/bedroom'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/bedroom'
    action:
    - service: script.navigation_telegramm_bedroom

  - alias: navigation_telegramm_living
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/living'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/living'
    action:
    - service: script.navigation_telegramm_living

  - alias: navigation_telegramm_balcony
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/balcony'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/balcony'
    action:
    - service: script.navigation_telegramm_balcony

  - alias: navigation_telegramm_system'
    mode: 'queued'
    trigger:
    - platform: event
      event_type: telegram_command
      event_data:
        command: '/system'
    - platform: event
      event_type: telegram_callback
      event_data:
        command: '/system'
    action:
    - service: script.navigation_telegramm_system


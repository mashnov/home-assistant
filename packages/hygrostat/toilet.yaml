hygrostat_toilet:
  fan:
  - platform: template
    fans:
      hygrostat_toilet:
        value_template: "{{ is_state('switch.relay_toilet_l1', 'on') }}"
        turn_on:
        - service: switch.turn_on
          entity_id: switch.relay_toilet_l1
        turn_off:
        - service: switch.turn_off
          entity_id: switch.relay_toilet_l1

  input_number:
    hygrostat_toilet_night: 
      max: 120
      min: 5
      # 15
    
    hygrostat_toilet_day: 
      max: 120
      min: 5
      # 30

  template:
  - sensor:
    - name: hygrostat_toilet_duration
      unique_id: hygrostat_toilet_duration
      state: >
        {% set isNightMode = is_state('input_boolean.night_mode_hall', 'on') %}
        {% set nightValue = states('input_number.hygrostat_toilet_night') | float(0) %}
        {% set dayValue = states('input_number.hygrostat_toilet_day') | float(0) %}
        {% set duration = iif(isNightMode, nightValue, dayValue) %}
        {{ duration | timestamp_custom('%H:%M:%S', false) }}

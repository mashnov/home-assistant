occupancy_shared:
  input_number:
    duration_occupancy_night: # 00:00:30
      max: 60
      min: 0
    duration_occupancy_day: # 00:02:00
      max: 240
      min: 0

  template:
  - sensor:
    - name: 'duration_occupancy'
      state: >
        {% set isNightMode = is_state('binary_sensor.night_mode_hall', 'on') %}
        {% set nightValue = states('input_number.duration_occupancy_night') %}
        {% set dayValue = states('input_number.duration_occupancy_day') %}
        {% set duration = iif(isNightMode, nightValue, dayValue) | int(0) %}
        {{ duration | timestamp_custom('%H:%M:%S', false) }}

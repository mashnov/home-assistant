notification:
  automation:

###
## HOME HOMEPOD
###

  - alias: 'notification_home_homepod_doorbell_inside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.doorbell_inside_action
    action:
    - service: script.homepod_message
      data_template:
        message: "–ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ –≤ –∫–æ–æ–∏–¥–æ—Ä–µ"

  - alias: 'notification_home_homepod_doorbell_outside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.doorbell_outside_action
    action:
    - service: script.homepod_message
      data_template:
        message: "–ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ —É –ª–∏—Ñ—Ç–∞"

  - alias: 'notification_home_homepod_night_mode_on'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'on'
      to: 'off'
    action:
    - service: script.homepod_message
      data_template:
        message: "–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω. –°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏."

  - alias: 'notification_home_homepod_night_mode_off'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'off'
      to: 'on'
    action:
    - service: script.homepod_message
      data_template:
        message: "–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –≤—ã–∫–ª—é—á–µ–Ω. –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!"

###
## HOME TELEGRAMM
###

  - alias: 'notification_home_telegramm_doorbell_inside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.doorbell_inside_action
    action:
    - service: script.telegramm_send_home_text
      data_template:
        message: |
          üè† –î–æ–º ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ –≤ –∫–æ–æ–∏–¥–æ—Ä–µ

  - alias: 'notification_home_telegramm_doorbell_outside'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: event.doorbell_outside_action
    action:
    - service: script.telegramm_send_home_text
      data_template:
        message: |
          üè† –î–æ–º ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –ö—Ç–æ-—Ç–æ –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É –∑–≤–æ–Ω–∫–∞ —É –ª–∏—Ñ—Ç–∞

  - alias: 'notification_home_telegramm_night_mode_on'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'on'
      to: 'off'
    action:
    - service: script.telegramm_send_home_text
      data_template:
        message: |
          üè† –î–æ–º ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω.

  - alias: 'notification_home_telegramm_night_mode_off'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'input_boolean.is_night_mode'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_home_text
      data_template:
        message: |
          üè† –î–æ–º ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –≤—ã–∫–ª—é—á–µ–Ω.

###
## CLIMAT HOMEPOD
###

  - alias: 'notification_climat_homepod_hygrostat_empty_hall'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.hygrostat_hall_is_empty'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ö–æ—Ä–∏–¥–æ—Ä. –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ"

  - alias: 'notification_climat_homepod_hygrostat_empty_bedroom'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.hygrostat_bedroom_is_empty'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–°–ø–∞–ª—å–Ω—è. –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ"

  - alias: 'notification_climat_homepod_hygrostat_empty_living'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.hygrostat_living_is_empty'
      from: 'off'
      to: 'on'
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ì–æ—Å—Ç–∏–Ω–∞—è. –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ"

  - alias: 'notification_climat_homepod_mold_kitchen'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_kitchen
      above: 70
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ö—É—Ö–Ω—è. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ."

  - alias: 'notification_climat_homepod_mold_hall'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_hall
      above: 70
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ö–æ—Ä–∏–¥–æ—Ä. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ."

  - alias: 'notification_climat_homepod_mold_bedroom'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_bedroom
      above: 70
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–°–ø–∞–ª—å–Ω—è. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ."

  - alias: 'notification_climat_homepod_mold_living'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_living
      above: 70
    action:
    - choose:
      - conditions:
        - condition: state
          entity_id: input_boolean.is_night_mode
          state: 'off'
        sequence:
        - service: script.homepod_message
          data_template:
            message: "–ì–æ—Å—Ç–∏–Ω–∞—è. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ."

###
## CLIMAT TELEGRAMM
###

  - alias: 'notification_climat_telegrammhygrostat_empty_hall'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.hygrostat_hall_is_empty'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: |
          üß• –ö–æ—Ä–∏–¥–æ—Ä ({{ now().timestamp() | timestamp_custom('%H:%M') }})
              
          –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ

          –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {{ states('sensor.temperature_hall') }} ¬∞C
          –í–ª–∞–∂–Ω–æ—Å—Ç—å: {{ states('sensor.humidity_hall') }} %

  - alias: 'notification_climat_telegrammhygrostat_empty_bedroom'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.hygrostat_bedroom_is_empty'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: |
          üõèÔ∏è –°–ø–∞–ª—å–Ω—è ({{ now().timestamp() | timestamp_custom('%H:%M') }})

          –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ

          –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {{ states('sensor.temperature_bedroom') }} ¬∞C
          –í–ª–∞–∂–Ω–æ—Å—Ç—å: {{ states('sensor.humidity_bedroom') }} %

  - alias: 'notification_climat_telegrammhygrostat_empty_living'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.hygrostat_living_is_empty'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: |
          üõãÔ∏è –ì–æ—Å—Ç–∏–Ω–∞—è ({{ now().timestamp() | timestamp_custom('%H:%M') }})

          –ó–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –≤–æ–¥–∞ –≤ —É–≤–ª–∞–∂–Ω–∏—Ç–µ–ª–µ

          –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {{ states('sensor.temperature_living') }} ¬∞C
          –í–ª–∞–∂–Ω–æ—Å—Ç—å: {{ states('sensor.humidity_living') }} %

  - alias: 'notification_climat_telegramm_mold_kitchen'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_kitchen
      above: 70
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: |
          ü•£ –ö—É—Ö–Ω—è ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ. 
          –†–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –ø–ª–µ—Å–µ–Ω–∏ {{ states('sensor.mold_kitchen') }} %

  - alias: 'notification_climat_telegramm_mold_hall'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_hall
      above: 70
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: |
          üß• –ö–æ—Ä–∏–¥–æ—Ä ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ. 
          –†–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –ø–ª–µ—Å–µ–Ω–∏ {{ states('sensor.mold_hall') }} %

  - alias: 'notification_climat_telegramm_mold_bedroom'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_bedroom
      above: 70
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: |
          üõèÔ∏è –°–ø–∞–ª—å–Ω—è ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ. 
          –†–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –ø–ª–µ—Å–µ–Ω–∏ {{ states('sensor.mold_bedroom') }} %

  - alias: 'notification_climat_telegramm_mold_living'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.mold_living
      above: 70
    action:
    - service: script.telegramm_send_climat_text
      data_template:
        message: |
          üõãÔ∏è –ì–æ—Å—Ç–∏–Ω–∞—è ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ. 
          –†–∏—Å–∫ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –ø–ª–µ—Å–µ–Ω–∏ {{ states('sensor.mold_living') }} %

###
## SYSTEM
###

  - alias: 'notification_system_shutdown'
    mode: 'queued'
    trigger:
    - platform: homeassistant
      event: shutdown
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

  - alias: 'notification_system_start'
    mode: 'queued'
    trigger:
    - platform: homeassistant
      event: start
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –°—Ç–∞—Ä—Ç —Å–∏—Å—Ç–µ–º—ã

  - alias: 'notification_system_backup'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.system_is_backed_up'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

  - alias: 'notification_system_backup_error'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'sensor.backup_state'
      to: 'error'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –û—à–∏–±–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

  - alias: 'notification_power_error'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'binary_sensor.rpi_power_status'
      from: 'off'
      to: 'on'
      for:
        seconds: 5
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∏—Ç–∞–Ω–∏–µ–º

  - alias: 'notification_system_update'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.home_assistant_core_update'
      from: 'off'
      to: 'on'
    - platform: state
      entity_id: 'update.home_assistant_operating_system_update'
      from: 'off'
      to: 'on'
    - platform: state
      entity_id: 'update.home_assistant_supervisor_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

  - alias: 'notification_system_plugin_update'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.tailscale_update'
      from: 'off'
      to: 'on'
    - platform: state
      entity_id: 'update.zigbee2mqtt_update'
      from: 'off'
      to: 'on'
    - platform: state
      entity_id: 'update.mosquitto_broker_update'
      from: 'off'
      to: 'on'
    - platform: state
      entity_id: 'update.home_assistant_google_drive_backup_update'
      from: 'off'
      to: 'on'
    - platform: state
      entity_id: 'update.file_editor_update'
      from: 'off'
      to: 'on'
    - platform: state
      entity_id: 'update.terminal_ssh_update'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

  - alias: 'notification_system_hacs_update'
    mode: 'queued'
    trigger:
    - platform: numeric_state
      entity_id: sensor.hacs
      above: 0
    action:
    - service: script.telegramm_send_system_text
      data_template:
        message: |
          ‚öôÔ∏è –°–∏—Å—Ç–µ–º–∞ ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ HACS

###
## SECURITY
###

  - alias: 'notification_secuirity_balcony_door_open'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_balcony'
      from: 'off'
      to: 'on'
    action:
    - service: script.camera_living_take_photo
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: |
          ü™¥ –ë–∞–ª–∫–æ–Ω ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –î–≤–µ—Ä—å –æ—Ç–∫—Ä—ã—Ç–∞

  - alias: 'notification_secuirity_door_close'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_balcony'
      from: 'on'
      to: 'off'
    action:
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: |
          ü™¥ –ë–∞–ª–∫–æ–Ω ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –î–≤–µ—Ä—å –∑–∞–∫—Ä—ã—Ç–∞

  - alias: 'notification_secuirity_hall_door_open'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_hall'
      from: 'off'
      to: 'on'
    action:
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: |
          üß• –ö–æ—Ä–∏–¥–æ—Ä ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –î–≤–µ—Ä—å –æ—Ç–∫—Ä—ã—Ç–∞

  - alias: 'notification_secuirity_hall_door_close'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_hall'
      from: 'on'
      to: 'off'
    action:
    - service: script.telegramm_send_secuirity_text
      data_template:
        message: |
          üß• –ö–æ—Ä–∏–¥–æ—Ä ({{ now().timestamp() | timestamp_custom('%H:%M') }})
          –î–≤–µ—Ä—å –∑–∞–∫—Ä—Ç–∞

temperature:
  input_number:
    # home
    temperature_home_sensor_min:
      max: 35
      min: 15
      step: 1
    temperature_home_sensor_max:
      max: 35
      min: 15
      step: 1
    # kitchen
    temperature_kitchen_sensor_min:
      max: 35
      min: 15
      step: 1
    temperature_kitchen_sensor_max:
      max: 35
      min: 15
      step: 1
    # hall
    temperature_hall_sensor_min:
      max: 35
      min: 15
      step: 1
    temperature_hall_sensor_max:
      max: 35
      min: 15
      step: 1
    # bath
    temperature_bath_sensor_min:
      max: 35
      min: 15
      step: 1
    temperature_bath_sensor_max:
      max: 35
      min: 15
      step: 1
    # bedroom
    temperature_bedroom_sensor_min:
      max: 35
      min: 15
      step: 1
    temperature_bedroom_sensor_max:
      max: 35
      min: 15
      step: 1
    # living
    temperature_living_sensor_min:
      max: 35
      min: 15
      step: 1
    temperature_living_sensor_max:
      max: 35
      min: 15
      step: 1
    # balcony
    temperature_balcony_sensor_min:
      max: 35
      min: -20
      step: 1
    temperature_balcony_sensor_max:
      max: 35
      min: -20
      step: 1

  template:
  - sensor: 
    # home
    - name: 'temperature_home_virtual'
      device_class: 'temperature'
      unit_of_measurement: '°C'
      state: >
        {% set kitchenValue = states('sensor.temperature_kitchen_virtual') | int(minValue) %}
        {% set hallValue = states('sensor.temperature_hall_virtual') | int(minValue) %}
        {% set bedroomValue = states('sensor.temperature_bedroom_virtual') | int(minValue) %}
        {% set livingValue = states('sensor.temperature_living_virtual') | int(minValue) %}
        {% set sensorValue = kitchenValue + hallValue + bedroomValue + livingValue %}
        {{ (sensorValue / 4 ) | round(0) }}
    # kitchen
    - name: 'temperature_kitchen_virtual'
      device_class: 'temperature'
      unit_of_measurement: '°C'
      state: >
        {% set minValue = states('input_number.temperature_kitchen_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.kitchen_temperature') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # hall 
    - name: 'temperature_hall_virtual'
      device_class: 'temperature'
      unit_of_measurement: '°C'
      state: >
        {% set minValue = states('input_number.temperature_hall_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.hall_temperature') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # bath
    - name: 'temperature_bath_virtual'
      device_class: 'temperature'
      unit_of_measurement: '°C'
      state: >
        {% set minValue = states('input_number.temperature_bath_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.bath_temperature') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # bedroom
    - name: 'temperature_bedroom_virtual'
      device_class: 'temperature'
      unit_of_measurement: '°C'
      state: >
        {% set minValue = states('input_number.temperature_bedroom_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.bedroom_temperature') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # living
    - name: 'temperature_living_virtual'
      device_class: 'temperature'
      unit_of_measurement: '°C'
      state: >
        {% set minValue = states('input_number.temperature_living_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.living_temperature') | int(minValue) %}
        {{ sensorValue | round(0) }}
    # balcony
    - name: 'temperature_balcony_virtual'
      device_class: 'temperature'
      unit_of_measurement: '°C'
      state: >
        {% set minValue = states('input_number.temperature_balcony_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.balcony_temperature') | int(minValue) %}
        {{ sensorValue | round(0) }}

  - binary_sensor:
    # home
    - name: 'temperature_home_air_is_cold'
      state: >
        {% set minValue = states('input_number.temperature_home_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.temperature_home_virtual') | float(maxValue) %}
        {{ sensorValue < minValue }}
    - name: 'temperature_home_air_is_hot'
      state: >
        {% set maxValue = states('input_number.temperature_home_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_home_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'temperature_home_air_is_normal'
      state: >
        {% set minValue = states('input_number.temperature_home_sensor_min') | int(0) %}
        {% set maxValue = states('input_number.temperature_home_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_home_virtual') | float(maxValue) %}
        {{ (sensorValue >= minValue) and (sensorValue <= maxValue) }}
    # kitchen
    - name: 'temperature_kitchen_air_is_cold'
      state: >
        {% set minValue = states('input_number.temperature_kitchen_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.temperature_kitchen_virtual') | float(maxValue) %}
        {{ sensorValue < minValue }}
    - name: 'temperature_kitchen_air_is_hot'
      state: >
        {% set maxValue = states('input_number.temperature_kitchen_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_kitchen_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'temperature_kitchen_air_is_normal'
      state: >
        {% set minValue = states('input_number.temperature_kitchen_sensor_min') | int(0) %}
        {% set maxValue = states('input_number.temperature_kitchen_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_kitchen_virtual') | float(maxValue) %}
        {{ (sensorValue >= minValue) and (sensorValue <= maxValue) }}
    # hall 
    - name: 'temperature_hall_air_is_cold'
      state: >
        {% set minValue = states('input_number.temperature_hall_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.temperature_hall_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'temperature_hall_air_is_hot'
      state: >
        {% set maxValue = states('input_number.temperature_hall_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_hall_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'temperature_hall_air_is_normal'
      state: >
        {% set minValue = states('input_number.temperature_hall_sensor_min') | int(0) %}
        {% set maxValue = states('input_number.temperature_hall_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_hall_virtual') | float(maxValue) %}
        {{ (sensorValue >= minValue) and (sensorValue <= maxValue) }}
    # bath
    - name: 'temperature_bath_air_is_cold'
      state: >
        {% set minValue = states('input_number.temperature_bath_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.temperature_bath_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'temperature_bath_air_is_hot'
      state: >
        {% set maxValue = states('input_number.temperature_bath_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_bath_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'temperature_bath_air_is_normal'
      state: >
        {% set minValue = states('input_number.temperature_bath_sensor_min') | int(0) %}
        {% set maxValue = states('input_number.temperature_bath_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_bath_virtual') | float(maxValue) %}
        {{ (sensorValue >= minValue) and (sensorValue <= maxValue) }}
    # bedroom
    - name: 'temperature_bedroom_air_is_cold'
      state: >
        {% set minValue = states('input_number.temperature_bedroom_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.temperature_bedroom_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'temperature_bedroom_air_is_hot'
      state: >
        {% set maxValue = states('input_number.temperature_bedroom_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_bedroom_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'temperature_bedroom_air_is_normal'
      state: >
        {% set minValue = states('input_number.temperature_bedroom_sensor_min') | int(0) %}
        {% set maxValue = states('input_number.temperature_bedroom_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_bedroom_virtual') | float(maxValue) %}
        {{ (sensorValue >= minValue) and (sensorValue <= maxValue) }}
    # living
    - name: 'temperature_living_air_is_cold'
      state: >
        {% set minValue = states('input_number.temperature_living_sensor_min') | int(0) %}
        {% set sensorValue = states('sensor.temperature_living_virtual') | float(minValue) %}
        {{ sensorValue < minValue }}
    - name: 'temperature_living_air_is_hot'
      state: >
        {% set maxValue = states('input_number.temperature_living_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_living_virtual') | float(maxValue) %}
        {{ sensorValue > maxValue }}
    - name: 'temperature_living_air_is_normal'
      state: >
        {% set minValue = states('input_number.temperature_living_sensor_min') | int(0) %}
        {% set maxValue = states('input_number.temperature_living_sensor_max') | int(0) %}
        {% set sensorValue = states('sensor.temperature_living_virtual') | float(maxValue) %}
        {{ (sensorValue >= minValue) and (sensorValue <= maxValue) }}

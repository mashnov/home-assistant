light_top_kitchen:
  light:
  - platform: group
    name: light_top_kitchen_group
    entities:
    - light.light_xiaomi_kitchen_1
    - light.light_xiaomi_kitchen_2
    - light.light_xiaomi_kitchen_3
    - light.light_xiaomi_kitchen_4
    - light.light_xiaomi_kitchen_5

  - platform: template
    lights:
      light_top_kitchen:
        unique_id: light_top_kitchen
        value_template: "{{ is_state('light.light_top_kitchen_group', 'on') }}"
        level_template: "{{ state_attr('light.light_top_kitchen_group', 'brightness') }}"
        temperature_template: "{{ state_attr('light.light_top_kitchen_group', 'color_temp') }}"
        turn_on:
        - service: light.turn_on
          entity_id: 
          - light.light_xiaomi_kitchen_1
          - light.light_xiaomi_kitchen_2
          - light.light_xiaomi_kitchen_3
          - light.light_xiaomi_kitchen_4
          - light.light_xiaomi_kitchen_5
        turn_off:
        - service: light.turn_off
          entity_id: 
          - light.light_xiaomi_kitchen_1
          - light.light_xiaomi_kitchen_2
          - light.light_xiaomi_kitchen_3
          - light.light_xiaomi_kitchen_4
          - light.light_xiaomi_kitchen_5
        set_level:
        - action: light.turn_on
          entity_id: 
          - light.light_xiaomi_kitchen_1
          - light.light_xiaomi_kitchen_2
          - light.light_xiaomi_kitchen_3
          - light.light_xiaomi_kitchen_4
          - light.light_xiaomi_kitchen_5
          data_template:
            brightness: "{{ brightness }}"
        set_temperature:
        - action: light.turn_on
          entity_id: 
          - light.light_xiaomi_kitchen_1
          - light.light_xiaomi_kitchen_2
          - light.light_xiaomi_kitchen_3
          - light.light_xiaomi_kitchen_4
          - light.light_xiaomi_kitchen_5
          data_template:
            color_temp: "{{ color_temp }}"

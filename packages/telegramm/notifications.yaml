telegramm_notifications:
  input_text:
    notification_system_shutdown_text:
      initial: 'Завершение работы'
    notification_system_start_text:
      initial: 'Старт системы'
    notification_system_power_text:
      initial: 'Проблемы с питанием'
    notification_system_update_text:
      initial: 'Доступно обновление'
    notification_door_balcony_open_text:
      initial: 'Балкон. Дверь открыта'
    notification_door_balcony_closed_text:
      initial: 'Балкон. Дверь закрыта'
    notification_door_hall_open_text:
      initial: 'Коридор. Входная дверь открыта'
    notification_door_hall_closed_text:
      initial: 'Коридор. Входная дверь закрыта'

  automation:

  - alias: 'notification_system_shutdown'
    mode: 'queued'
    trigger:
    - platform: homeassistant
      event: shutdown
    action:
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_system_shutdown_text') }}"

  - alias: 'notification_system_start'
    mode: 'queued'
    trigger:
    - platform: homeassistant
      event: start
    action:
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_system_start_text') }}"

  - alias: 'notification_power'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'binary_sensor.rpi_power_status'
      to: 'on'
    action:
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_system_power_text') }}"

  - alias: 'system_update_message'
    mode: 'queued'
    trigger:
    - platform: state
      entity_id: 'update.home_assistant_core_update'
      to: 'on'
    - platform: state
      entity_id: 'update.home_assistant_operating_system_update'
      to: 'on'
    - platform: state
      entity_id: 'update.home_assistant_supervisor_update'
      to: 'on'
    - platform: state
      entity_id: 'update.tailscale_update'
      to: 'on'
    - platform: state
      entity_id: 'update.zigbee2mqtt_update'
      to: 'on'
    - platform: state
      entity_id: 'update.mosquitto_broker_update'
      to: 'on'
    - platform: state
      entity_id: 'update.home_assistant_google_drive_backup_update'
      to: 'on'
    - platform: state
      entity_id: 'update.file_editor_update'
      to: 'on'
    - platform: state
      entity_id: 'update.terminal_ssh_update'
      to: 'on'
    action:
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_system_update_text') }}"

  - alias: 'notification_balcony_door_open'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_balcony'
      from: 'off'
      to: 'on'
    action:
    - service: script.camera_living_take_photo
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_door_balcony_open_text') }}"

  - alias: 'notification_balcony_door_close'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_balcony'
      from: 'on'
      to: 'off'
    action:
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_door_balcony_closed_text') }}"

  - alias: 'notification_hall_door_open'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_hall'
      from: 'off'
      to: 'on'
    action:
    - service: script.camera_living_take_photo
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_door_hall_open_text') }}"

  - alias: 'notification_hall_door_close'
    mode: 'queued'
    trigger:
      platform: state
      entity_id: 'binary_sensor.door_hall'
      from: 'on'
      to: 'off'
    action:
    - service: script.telegramm_send_text
      data_template:
        message: "{{ states('input_text.notification_door_hall_closed_text') }}"

climat_illuminance:
  sensor:
  - name: climat_illuminance_max
    unique_id: climat_illuminance_max
    platform: statistics
    entity_id: sensor.climat_illuminance_virtual
    state_characteristic: value_max
    max_age:
      days: 1

  binary_sensor:
  - platform: trend
    sensors:
      climat_illuminance_is_increasing:
        entity_id: sensor.climat_illuminance_virtual        
        sample_duration: 600

      climat_illuminance_is_decreasing:
        entity_id: sensor.climat_illuminance_virtual
        sample_duration: 600
        invert: true

  template:
  - sensor:
    - name: climat_illuminance_virtual
      unique_id: climat_illuminance_virtual
      device_class: illuminance
      unit_of_measurement: lx
      state: "{{ states('sensor.illuminance_balcony') | round(1, default = 0) | float }}"
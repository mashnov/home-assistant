climat_humidity:
  sensor:
  - platform: min_max
    name: climat_humidity_average
    unique_id: climat_humidity_average
    type: mean
    round_digits: 0
    entity_ids:
    - sensor.climat_humidity_kitchen_virtual
    - sensor.climat_humidity_hall_virtual
    - sensor.climat_humidity_bedroom_virtual
    - sensor.climat_humidity_living_virtual

  binary_sensor:
  - platform: trend
    sensors:
      climat_humidity_is_decreasing:
        entity_id: sensor.climat_humidity_average
        sample_duration: 3600

  template:
  - sensor:
    - name: climat_humidity_kitchen_virtual
      unique_id: climat_humidity_kitchen_virtual
      device_class: humidity
      unit_of_measurement: "%"
      state: "{{ states('sensor.humidity_kitchen') | round(1, default = 0) | float }}"

    - name: climat_humidity_bath_virtual
      unique_id: climat_humidity_bath_virtual
      device_class: humidity
      unit_of_measurement: "%"
      state: "{{ states('sensor.humidity_bath') | round(1, default = 0) | float }}"

    - name: climat_humidity_toilet_virtual
      unique_id: climat_humidity_toilet_virtual
      device_class: humidity
      unit_of_measurement: "%"
      state: "{{ states('sensor.humidity_toilet') | round(1, default = 0) | float }}"

    - name: climat_humidity_hall_virtual
      unique_id: climat_humidity_hall_virtual
      device_class: humidity
      unit_of_measurement: "%"
      state: "{{ states('sensor.humidity_hall') | round(1, default = 100) | float }}"

    - name: climat_humidity_bedroom_virtual
      unique_id: climat_humidity_bedroom_virtual
      device_class: humidity
      unit_of_measurement: "%"
      state: "{{ states('sensor.humidity_bedroom') | round(1, default = 100) | float }}"

    - name: climat_humidity_living_virtual
      unique_id: climat_humidity_living_virtual
      device_class: humidity
      unit_of_measurement: "%"
      state: "{{ states('sensor.humidity_living') | round(1, default = 100) | float }}"

    - name: climat_humidity_balcony_virtual
      unique_id: climat_humidity_balcony_virtual
      device_class: humidity
      unit_of_measurement: "%"
      state: "{{ states('sensor.ble_humidity_thermometer_balcony') | round(1, default = 0) | float }}"


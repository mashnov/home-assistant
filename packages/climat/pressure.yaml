climat_pressure:
  sensor:
  - platform: min_max
    name: climat_pressure_average
    unique_id: climat_pressure_average
    type: mean
    round_digits: 0
    entity_ids:
    - sensor.climat_pressure_kitchen_virtual
    - sensor.climat_pressure_hall_virtual
    - sensor.climat_pressure_toilet_virtual
    - sensor.climat_pressure_bedroom_virtual
    - sensor.climat_pressure_living_virtual

  template:
  - sensor:
    - name: climat_pressure_kitchen_virtual
      unique_id: climat_pressure_kitchen_virtual
      device_class: pressure
      unit_of_measurement: mmHg
      state: "{{ states('sensor.pressure_kitchen') | default(758) | int(758) }}"

    - name: climat_pressure_hall_virtual
      unique_id: climat_pressure_hall_virtual
      device_class: pressure
      unit_of_measurement: mmHg
      state: "{{ states('sensor.pressure_hall') | default(758) | int(758) }}"

    - name: climat_pressure_toilet_virtual
      unique_id: climat_pressure_toilet_virtual
      device_class: pressure
      unit_of_measurement: mmHg
      state: "{{ states('sensor.pressure_toilet') | default(758) | int(758) }}"

    - name: climat_pressure_bedroom_virtual
      unique_id: climat_pressure_bedroom_virtual
      device_class: pressure
      unit_of_measurement: mmHg
      state: "{{ states('sensor.pressure_bedroom') | default(758) | int(758) }}"

    - name: climat_pressure_living_virtual
      unique_id: climat_pressure_living_virtual
      device_class: pressure
      unit_of_measurement: mmHg
      state: "{{ states('sensor.pressure_living') | default(758) | int(758) }}"

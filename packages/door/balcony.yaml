door_balcony:
  input_text:
    door_balcony_open_text:
      initial: 'Балкон. Дверь открыта'
    door_balcony_closed_text:
      initial: 'Балкон. Дверь закрыта'

  automation:
  - alias: 'door_balcony_open'
    mode: 'queued'
    trigger:
    - id: 'open'
      platform: state
      entity_id: 'binary_sensor.door_balcony'
      from: 'off'
      to: 'on'
    - id: 'close'
      platform: state
      entity_id: 'binary_sensor.door_balcony'
      from: 'on'
      to: 'off'    
    action:
    - choose:
      - conditions:
        - condition: trigger
          id: 'open'
        sequence:
        - service: script.telegramm_send_text
          data_template:
            message: "{{ states('input_text.door_balcony_open_text') }}"
      - conditions:
        - condition: trigger
          id: 'close'
        sequence:
        - service: script.telegramm_send_text
          data_template:
            message: "{{ states('input_text.door_balcony_closed_text') }}"

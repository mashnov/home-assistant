intercom_hall:
  lock:
  - platform: template
    name: intercom_hall
    value_template: "{{ is_state('input_boolean.intercom_hall_open', 'off') }}"
    unlock:
    - service: script.intercom_hall_open
    lock:
    - service: input_boolean.turn_off
      entity_id: input_boolean.intercom_hall_open

  camera:
  - platform: local_file
    name: intercom_hall
    file_path: https://thumb.ac-illust.com/93/936741c854be58c59c5e7910f595cdae_t.jpeg

  input_boolean:
    intercom_hall_call:
    intercom_hall_open:
    intercom_hall_enabled:

  template:
  - binary_sensor:
    - name: intercom_hall_call
      unique_id: intercom_hall_call
      device_class: motion
      state: "{{ is_state('input_boolean.intercom_hall_call', 'on') }}"

  script:
    intercom_hall_open:
      mode: 'queued'
      sequence:
      - service: switch.turn_on
        entity_id: switch.intercom_hall
      - service: input_boolean.turn_on
        entity_id: input_boolean.intercom_hall_open
      - delay: '00:00:02'
      - service: input_boolean.turn_off
        entity_id: input_boolean.intercom_hall_open
      - service: switch.turn_off
        entity_id: switch.intercom_hall
